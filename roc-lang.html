
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://dotmobo.xyz/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
    href="https://dotmobo.xyz/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
          href="https://dotmobo.xyz/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light)"
          href="https://dotmobo.xyz/theme/pygments/emacs.min.css">


  <link rel="stylesheet" type="text/css" href="https://dotmobo.xyz/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://dotmobo.xyz/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://dotmobo.xyz/theme/font-awesome/css/solid.css">

    <link href="https://dotmobo.xyz/css/custom.css" rel="stylesheet">




<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68852219-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Microsoft EDGE -->
    <meta name="msapplication-TileColor" content="#333333">

<meta name="author" content="Morgan" />
<meta name="description" content="Découverte du language Roc" />
<meta name="keywords" content="roc, language, functional, programming, elm, haskell, richard, feldman, lang">


<meta property="og:site_name" content=".mobo"/>
<meta property="og:title" content="Découverte du language Roc"/>
<meta property="og:description" content="Découverte du language Roc"/>
<meta property="og:locale" content="fr_FR"/>
<meta property="og:url" content="https://dotmobo.xyz/roc-lang.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2024-07-15 00:00:00+02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://dotmobo.xyz/author/morgan.html">
<meta property="article:section" content="Roc"/>
<meta property="article:tag" content="roc"/>
<meta property="article:tag" content="language"/>
<meta property="article:tag" content="functional"/>
<meta property="article:tag" content="programming"/>
<meta property="article:tag" content="elm"/>
<meta property="article:tag" content="haskell"/>
<meta property="article:tag" content="richard"/>
<meta property="article:tag" content="feldman"/>
<meta property="article:tag" content="lang"/>
<meta property="og:image" content="//dotmobo.xyz/images/avatar700.jpg">

  <title>.mobo &ndash; Découverte du language Roc</title>

</head>
<body >
  <aside>
    <div>
      <a href="https://dotmobo.xyz">
        <img src="//dotmobo.xyz/images/avatar700.jpg" alt=".mobo" title=".mobo">
      </a>

      <h1>
        <a href="https://dotmobo.xyz">.mobo</a>
      </h1>

<p>Explorations d'un développeur</p>


      <ul class="social">
          <li>
            <a  class="sc-github" href="https://github.com/dotmobo" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-twitter" href="https://twitter.com/dotmobo" target="_blank">
              <i class="fab fa-twitter"></i>
            </a>
          </li>
          <li>
            <a  class="sc-rss" href="//dotmobo.xyz/feeds/all.atom.xml" target="_blank">
              <i class="fas fa-rss"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="https://dotmobo.xyz">Accueil</a>

      <a href="/categories.html">Catégories</a>
      <a href="/tags.html">Tags</a>
      <a href="/archives.html">Archives</a>


    </nav>

<article class="single">
  <header>
      
    <h1 id="roc-lang">Découverte du language Roc</h1>
    <p>
      Posté le 15/07/2024 dans <a href="https://dotmobo.xyz/category/roc.html">Roc</a>

    </p>
  </header>


  <div>
    <div class="section" id="programmation-fonctionnelle">
<h2>Programmation fonctionnelle</h2>
<p>Ah, la programmation fonctionnelle !</p>
<p>Je me rappellerai toujours ma découverte de <a class="reference external" href="https://www.haskell.org/">Haskell</a> avec l'excellent livre <a class="reference external" href="https://learnyouahaskell.com/">Learn You a Haskell</a>
que je conseille à tout le monde de lire !
Les concepts derrière le langage ont été pour moi complètement <em>mind blowing</em> et je garde toujours dans un coin de tête l'idée d'immutabilité et de fonction pure
quand je code.</p>
<p>Puis, est venu <a class="reference external" href="https://elm-lang.org/">Elm</a> qui a fait l'effet d'une bombe dans le monde du développement front-end. Alors évidemment, pas une bombe dans le
sens où tout le monde l'a adopté, car il est finalement resté de niche. Mais il faut savoir que tous les fondamentaux derrière Redux et l'idée d'un store
viennent directement d'Elm. Sans le savoir, la plupart des concepts qui sont dans ton framework préféré viennent d'Elm.</p>
<p>Alors quand j'ai vu que <a class="reference external" href="https://github.com/rtfeldman">Richard Feldman</a>, l'auteur de <a class="reference external" href="https://www.manning.com/books/elm-in-action">Elm in Action</a> et l'un des
plus gros contributeurs de la communauté Elm, se lance dans l'écriture de son langage, ça m'a forcément intrigué.</p>
</div>
<div class="section" id="roc-lang">
<h2>Roc lang</h2>
<img alt="Roc" class="align-right" src="./images/roc.jpg" />
<p><a class="reference external" href="https://www.roc-lang.org/">Roc</a> se veut donc une sorte d'héritier d'Elm, mais ici on parle d'un langage backend et pas uniquement dédié au frontend.</p>
<p>Là où Elm et Haskell ont échoué, c'est-à-dire à être adoptés massivement, Roc essaye de mélanger programmation fonctionnelle et simplicité de gestion des effets
de bord potentiels.</p>
<p>Il se veut être aussi simple à utiliser qu'un langage impératif pour la gestion des I/O et ça fait du bien.</p>
</div>
<div class="section" id="performance">
<h2>Performance</h2>
<p>On reproche souvent les mauvaises performances d'un langage fonctionnel.
Ici, le compilateur et le tooling sont écrits intégralement en <a class="reference external" href="https://www.rust-lang.org/fr">Rust</a>, avec des bouts de <a class="reference external" href="https://ziglang.org/">Zig</a>
qui font leur apparition.</p>
<p>On est donc ici dans un langage qui peut compiler en code machine ou en WebAssembly comme Rust.</p>
</div>
<div class="section" id="installation">
<h2>Installation</h2>
<p>Au niveau de l'installation, il n'y a pas encore vraiment de packaging car le langage est tout récent.
Donc on dézippe le tar.gz, on le met dans le path et on teste le REPL :</p>
<div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>libc-dev<span class="w"> </span>binutils
wget<span class="w"> </span>https://github.com/roc-lang/roc/releases/download/nightly/roc_nightly-linux_x86_64-latest.tar.gz
tar<span class="w"> </span>-xf<span class="w"> </span>roc_nightly-linux_x86_64-latest.tar.gz
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:~/path/to/roc_nightly-linux_x86_64-&lt;VERSION&gt;
roc<span class="w"> </span>version
roc<span class="w"> </span>repl
</pre></div>
<p>Au final le langage ressemble à ça :</p>
<div class="highlight"><pre><span></span><span class="nv">birds</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="mi">3</span>
<span class="nv">iguanas</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="mi">2</span>
<span class="nv">total</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">addAndStringify</span><span class="w"> </span><span class="nv">birds</span><span class="w"> </span><span class="nv">iguanas</span>

<span class="kr">main </span><span class="nf">=</span>
<span class="w">    </span><span class="kt">Stdout</span><span class="nf">.</span><span class="nv">line</span><span class="err">!</span><span class="w"> </span><span class="s">&quot;There are $(total) animals.&quot;</span>

<span class="nv">addAndStringify</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">num1</span><span class="p">,</span><span class="w"> </span><span class="nv">num2</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">toStr</span><span class="w"> </span><span class="p">(</span><span class="nv">num1</span><span class="w"> </span><span class="nf">+</span><span class="w"> </span><span class="nv">num2</span><span class="p">)</span>
</pre></div>
<p>Tu noteras qu'on n'a pas besoin d'utiliser les parenthèses pour faire des appels de fonctions.</p>
<p>Ici l'utilisation d'un <strong>map</strong> :</p>
<div class="highlight"><pre><span></span><span class="kt">List</span><span class="nf">.</span><span class="nv">map</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="nf">\</span><span class="nv">num</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">num</span><span class="w"> </span><span class="nf">*</span><span class="w"> </span><span class="mi">2</span>
</pre></div>
<p>Je ne vais pas passer en revue tout le langage, pour ça tu peux lire <a class="reference external" href="https://www.roc-lang.org/tutorial">le tutoriel</a>.
Mais on va voir les 2 ou 3 points intéressants.</p>
</div>
<div class="section" id="typage">
<h2>Typage</h2>
<p>Au niveau du typage, on est dans le <strong>typage statique</strong> que l'on peut décrire au-dessus de notre fonction via des <strong>annotations</strong>, comme pour Elm et Haskell.
En vrac les exemples sortis du tutoriel :</p>
<div class="highlight"><pre><span></span><span class="nv">fullName</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span><span class="p">,</span><span class="w"> </span><span class="kt">Str</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Str</span>
<span class="nv">fullName</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">firstName</span><span class="p">,</span><span class="w"> </span><span class="nv">lastName</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="s">&quot;$(firstName) $(lastName)&quot;</span>

<span class="kt">Musician</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">firstName</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span><span class="p">,</span><span class="w"> </span><span class="nv">lastName</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span><span class="w"> </span><span class="p">}</span>

<span class="nv">amy</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Musician</span>
<span class="nv">amy</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">firstName</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;Amy&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">lastName</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;Lee&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="nv">simone</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Musician</span>
<span class="nv">simone</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">firstName</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;Simone&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">lastName</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;Simons&quot;</span><span class="w"> </span><span class="p">}</span>

<span class="nv">names</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">Str</span>
<span class="nv">names</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;Amy&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Simone&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Tarja&quot;</span><span class="p">]</span>

<span class="nv">isEmpty</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="nf">*</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Bool</span>
</pre></div>
<p>Mais sache que c'est optionnel car le langage intègre l'<strong>inférence de type</strong>, ce qui assouplit l'utilisation du langage.
Ce qui veut dire que l'écriture suivante est valide :</p>
<div class="highlight"><pre><span></span><span class="nv">fullName</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">firstName</span><span class="p">,</span><span class="w"> </span><span class="nv">lastName</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="s">&quot;$(firstName) $(lastName)&quot;</span>
</pre></div>
</div>
<div class="section" id="pattern-matching">
<h2>Pattern matching</h2>
<p>On peut faire du <strong>pattern matching</strong> sur des listes de manière très simple, ce qui est quand même super cool :</p>
<div class="highlight"><pre><span></span><span class="nv">when</span><span class="w"> </span><span class="nv">myList</span><span class="w"> </span><span class="nv">is</span>
<span class="w">    </span><span class="p">[]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">list</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">empty</span>
<span class="w">    </span><span class="p">[</span><span class="kt">Foo</span><span class="p">,</span><span class="w"> </span><span class="nf">..</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">starts</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="kt">Foo</span><span class="w"> </span><span class="nv">tag</span>
<span class="w">    </span><span class="p">[</span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nf">..</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">contains</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">least</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">element</span><span class="p">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">ignore</span>
<span class="w">    </span><span class="p">[</span><span class="kt">Foo</span><span class="p">,</span><span class="w"> </span><span class="kt">Bar</span><span class="p">,</span><span class="w"> </span><span class="nf">..</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">starts</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="kt">Foo</span><span class="w"> </span><span class="nv">tag</span><span class="w"> </span><span class="nv">followed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="kt">Bar</span><span class="w"> </span><span class="nv">tag</span>
<span class="w">    </span><span class="p">[</span><span class="kt">Foo</span><span class="p">,</span><span class="w"> </span><span class="kt">Bar</span><span class="p">,</span><span class="w"> </span><span class="kt">Baz</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">exactly</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="nv">elements</span><span class="nf">:</span><span class="w"> </span><span class="kt">Foo</span><span class="p">,</span><span class="w"> </span><span class="kt">Bar</span><span class="p">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="kt">Baz</span>
<span class="w">    </span><span class="p">[</span><span class="kt">Foo</span><span class="p">,</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="nf">..</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">its</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="kt">Foo</span><span class="p">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">its</span><span class="w"> </span><span class="nv">second</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nf">`</span><span class="nv">a</span><span class="nf">`</span>
<span class="w">    </span><span class="p">[</span><span class="kt">Ok</span><span class="w"> </span><span class="nv">a</span><span class="p">,</span><span class="w"> </span><span class="nf">..</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">starts</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="kt">Ok</span><span class="w"> </span><span class="nv">containing</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">payload</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="nf">`</span><span class="nv">a</span><span class="nf">`</span>
<span class="w">    </span><span class="p">[</span><span class="nf">..</span><span class="p">,</span><span class="w"> </span><span class="kt">Foo</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">ends</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="kt">Foo</span><span class="w"> </span><span class="nv">tag</span>
<span class="w">    </span><span class="p">[</span><span class="kt">A</span><span class="p">,</span><span class="w"> </span><span class="kt">B</span><span class="p">,</span><span class="w"> </span><span class="nf">..</span><span class="p">,</span><span class="w"> </span><span class="kt">C</span><span class="p">,</span><span class="w"> </span><span class="kt">D</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">has</span><span class="w"> </span><span class="nv">certain</span><span class="w"> </span><span class="nv">elements</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">beginning</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">end</span>
<span class="w">    </span><span class="p">[</span><span class="nv">head</span><span class="p">,</span><span class="w"> </span><span class="nf">..</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nv">tail</span><span class="p">]</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="nv">destructure</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">list</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="p">(</span><span class="nv">head</span><span class="p">)</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">rest</span><span class="w"> </span><span class="p">(</span><span class="nv">tail</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="pipe-operator">
<h2>Pipe operator</h2>
<p>On a l'opérateur <strong>pipe</strong> pour enchaîner les fonctions :</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">]</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">reverse</span>
<span class="nf">|&gt;</span><span class="w"> </span><span class="kt">List</span><span class="nf">.</span><span class="nv">append</span><span class="w"> </span><span class="s">&quot;d&quot;</span>
</pre></div>
<p>Tous les langages modernes devraient intégrer cet opérateur, c'est tellement plus lisible !</p>
</div>
<div class="section" id="debugger">
<h2>Debugger</h2>
<p>Petit debugger intégré avec le mot-clé <strong>dbg</strong> qui permet de debugger facilement hors IDE à la manière d'un <em>print</em> avec des infos en plus :</p>
<div class="highlight"><pre><span></span><span class="nv">pluralize</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">singular</span><span class="p">,</span><span class="w"> </span><span class="nv">plural</span><span class="p">,</span><span class="w"> </span><span class="nv">count</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">dbg</span><span class="w"> </span><span class="nv">count</span>

<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">count</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kr">then</span>
<span class="w">        </span><span class="nv">singular</span>
<span class="w">    </span><span class="kr">else</span>
<span class="w">        </span><span class="nv">plural</span>
</pre></div>
</div>
<div class="section" id="gestion-des-erreurs">
<h2>Gestion des erreurs</h2>
<p>Ici on a une gestion des erreurs qui va rappeler Rust, en utilisant les mots-clés <strong>Ok</strong> et <strong>Err</strong> :</p>
<div class="highlight"><pre><span></span><span class="nv">answer</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span>
<span class="nv">answer</span><span class="w"> </span><span class="nf">=</span>
<span class="w">    </span><span class="nv">when</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">fromUtf8</span><span class="w"> </span><span class="nv">definitelyValidUtf8</span><span class="w"> </span><span class="nv">is</span>
<span class="w">        </span><span class="kt">Ok</span><span class="w"> </span><span class="nv">str</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">str</span>
<span class="w">        </span><span class="kt">Err</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="nv">crash</span><span class="w"> </span><span class="s">&quot;This should never happen!&quot;</span>
</pre></div>
</div>
<div class="section" id="testing">
<h2>Testing</h2>
<p>Bien évidemment, comme tout langage qui se respecte, on peut écrire des tests unitaires avec le mot-clé <strong>expect</strong> :</p>
<div class="highlight"><pre><span></span><span class="nv">pluralize</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nf">\</span><span class="nv">singular</span><span class="p">,</span><span class="w"> </span><span class="nv">plural</span><span class="p">,</span><span class="w"> </span><span class="nv">count</span><span class="w"> </span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="nv">countStr</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">Num</span><span class="nf">.</span><span class="nv">toStr</span><span class="w"> </span><span class="nv">count</span>

<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">count</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kr">then</span>
<span class="w">        </span><span class="s">&quot;$(countStr) $(singular)&quot;</span>
<span class="w">    </span><span class="kr">else</span>
<span class="w">        </span><span class="s">&quot;$(countStr) $(plural)&quot;</span>

<span class="w">    </span><span class="nv">expect</span><span class="w"> </span><span class="nv">pluralize</span><span class="w"> </span><span class="s">&quot;cactus&quot;</span><span class="w"> </span><span class="s">&quot;cacti&quot;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="s">&quot;1 cactus&quot;</span>
<span class="w">    </span><span class="nv">expect</span><span class="w"> </span><span class="nv">pluralize</span><span class="w"> </span><span class="s">&quot;cactus&quot;</span><span class="w"> </span><span class="s">&quot;cacti&quot;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nf">==</span><span class="w"> </span><span class="s">&quot;2 cacti&quot;</span>
</pre></div>
</div>
<div class="section" id="tasks">
<h2>Tasks</h2>
<p>Bon, cette dernière partie est l'une des plus intéressantes. Je te parlais au début de l'article de la gestion simplifiée des I/O et
des effets de bord. Ici, pas de Monad, mais un système de <strong>Task</strong>. Chaque plateforme implémente ses propres Tasks, ce qui permettra à
terme de gérer les bases de données, les appels réseaux, les appels asynchrones (via le suffixe <strong>!</strong>) ou encore les fichiers de la même
manière.</p>
<p>Ici un exemple un peu plus avancé de gestion de JSON :</p>
<div class="highlight"><pre><span></span><span class="nv">app</span><span class="w"> </span><span class="p">[</span><span class="nv">main</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">cli</span><span class="nf">:</span><span class="w"> </span><span class="nv">platform</span><span class="w"> </span><span class="s">&quot;https://github.com/roc-lang/basic-cli/releases/download/0.10.0/vNe6s9hWzoTZtFmNkvEICPErI9ptji_ySjicO6CkucY.tar.br&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nv">json</span><span class="nf">:</span><span class="w"> </span><span class="s">&quot;https://github.com/lukewilliamboswell/roc-json/releases/download/0.8.0/BlWJJh_ouV7c_IwvecYpgpR3jOCzVO-oyk-7ISdl2S4.tar.br&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="kn">import</span><span class="w"> </span><span class="nc">cli.Stdout</span>
<span class="kn">import</span><span class="w"> </span><span class="nc">cli.Task</span>
<span class="kn">import</span><span class="w"> </span><span class="nc">json.Core</span><span class="w"> </span><span class="nv">exposing</span><span class="w"> </span><span class="p">[</span><span class="nv">jsonWithOptions</span><span class="p">]</span>
<span class="kn">import</span><span class="w"> </span><span class="nc">Decode</span><span class="w"> </span><span class="nv">exposing</span><span class="w"> </span><span class="p">[</span><span class="nv">fromBytesPartial</span><span class="p">]</span>

<span class="kr">main </span><span class="nf">=</span>
<span class="w">    </span><span class="nv">requestBody</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="kt">Str</span><span class="nf">.</span><span class="nv">toUtf8</span><span class="w"> </span><span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">Image</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">Animated</span><span class="se">\&quot;</span><span class="s">:false,</span><span class="se">\&quot;</span><span class="s">Height</span><span class="se">\&quot;</span><span class="s">:600,</span><span class="se">\&quot;</span><span class="s">Ids</span><span class="se">\&quot;</span><span class="s">:[116,943,234,38793],</span><span class="se">\&quot;</span><span class="s">Thumbnail</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">Height</span><span class="se">\&quot;</span><span class="s">:125,</span><span class="se">\&quot;</span><span class="s">Url</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">http:</span><span class="se">\\</span><span class="s">/</span><span class="se">\\</span><span class="s">/www.example.com</span><span class="se">\\</span><span class="s">/image</span><span class="se">\\</span><span class="s">/481989943</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">Width</span><span class="se">\&quot;</span><span class="s">:100},</span><span class="se">\&quot;</span><span class="s">Title</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">View from 15th Floor</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">Width</span><span class="se">\&quot;</span><span class="s">:800}}&quot;</span>

<span class="w">    </span><span class="nv">decoder</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">jsonWithOptions</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">fieldNameMapping</span><span class="nf">:</span><span class="w"> </span><span class="kt">PascalCase</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="nv">decoded</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">DecodeResult</span><span class="w"> </span><span class="kt">ImageRequest</span>
<span class="w">    </span><span class="nv">decoded</span><span class="w"> </span><span class="nf">=</span><span class="w"> </span><span class="nv">fromBytesPartial</span><span class="w"> </span><span class="nv">requestBody</span><span class="w"> </span><span class="nv">decoder</span>

<span class="w">    </span><span class="nv">when</span><span class="w"> </span><span class="nv">decoded</span><span class="nf">.</span><span class="nv">result</span><span class="w"> </span><span class="nv">is</span>
<span class="w">        </span><span class="kt">Ok</span><span class="w"> </span><span class="nv">record</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Stdout</span><span class="nf">.</span><span class="nv">line</span><span class="w"> </span><span class="s">&quot;Successfully decoded image, title:</span><span class="se">\&quot;</span><span class="s">$(record.image.title)</span><span class="se">\&quot;</span><span class="s">&quot;</span>
<span class="w">        </span><span class="kt">Err</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nf">-&gt;</span><span class="w"> </span><span class="kt">Task</span><span class="nf">.</span><span class="nv">err</span><span class="w"> </span><span class="p">(</span><span class="kt">Exit</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="s">&quot;Error, failed to decode image&quot;</span><span class="p">)</span>

<span class="kt">ImageRequest</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">image</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nv">width</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">I64</span><span class="p">,</span>
<span class="w">        </span><span class="nv">height</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">I64</span><span class="p">,</span>
<span class="w">        </span><span class="nv">title</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span><span class="p">,</span>
<span class="w">        </span><span class="nv">thumbnail</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nv">url</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Str</span><span class="p">,</span>
<span class="w">            </span><span class="nv">height</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">F32</span><span class="p">,</span>
<span class="w">            </span><span class="nv">width</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">F32</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nv">animated</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">Bool</span><span class="p">,</span>
<span class="w">        </span><span class="nv">ids</span><span class="w"> </span><span class="nf">:</span><span class="w"> </span><span class="kt">List</span><span class="w"> </span><span class="kt">U32</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
<p>Et voilà pour cette introduction à Roc, j'espère t'avoir au moins intrigué !</p>
<p>Pour avoir une liste d'exemples plus avancés, tu peux jeter un oeil <a class="reference external" href="https://www.roc-lang.org/examples">ici</a>.</p>
<p>Et si tu viens du monde de Elm, il y a même un guide <a class="reference external" href="https://github.com/roc-lang/roc/blob/main/roc-for-elm-programmers.md">roc for elm programmers</a> !</p>
</div>

  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://dotmobo.xyz/tag/roc.html">roc</a>
      <a href="https://dotmobo.xyz/tag/language.html">language</a>
      <a href="https://dotmobo.xyz/tag/functional.html">functional</a>
      <a href="https://dotmobo.xyz/tag/programming.html">programming</a>
      <a href="https://dotmobo.xyz/tag/elm.html">elm</a>
      <a href="https://dotmobo.xyz/tag/haskell.html">haskell</a>
      <a href="https://dotmobo.xyz/tag/richard.html">richard</a>
      <a href="https://dotmobo.xyz/tag/feldman.html">feldman</a>
      <a href="https://dotmobo.xyz/tag/lang.html">lang</a>
    </p>
  </div>





<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'dotmobo';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Veuillez activer le JavaScript pour voir les commentaires.
</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>
  &copy; 2024  - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>
Construit avec <a href="http://getpelican.com" target="_blank">Pelican</a> utilisant le thème <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a>
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="https://dotmobo.xyz/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="dark"
          type="text/javascript">
  </script>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " .mobo ",
  "url" : "https://dotmobo.xyz",
  "image": "//dotmobo.xyz/images/avatar700.jpg",
  "description": ".mobo - explorations d'un développeur"
}
</script>


</body>
</html>